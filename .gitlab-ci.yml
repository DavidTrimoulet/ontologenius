image: ros:kinetic-ros-base-xenial

before_script:
  - source /opt/ros/kinetic/setup.bash
  - apt-get update -qq && apt-get install -y libcppunit-1.13-0v5 libcppunit-dev ros-kinetic-opencv3

stages:
  - build
  - test

run-build:
  stage: build
  script:
    - mkdir -p ~/ros_ws/src
    - cd ~/ros_ws
    - catkin_make
    - cd src
    - cp -r /builds/DavidTrimoulet/ontologenius .
    - cd ..
    - catkin_make

run-test:
  stage: test
  script :
    - cd /builds/DavidTrimoulet/ontologenius
    - make test